!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[766],{2766:function(t,a,n){n.r(a),n.d(a,{SuperStockistReportModule:function(){return X}});var i,s=n(8583),c=n(3423),u=n(2396),d=n(2340),l=n(8259),p=n.n(l),g=n(7716),m=n(5304),h=n(8307),Z=n(9765),f=n(205),R=n(1841),A=((i=function(){function t(e){r(this,t),this.http=e,this.BASE_API_URL=d.N.BASE_API_URL,this.customerSaleReportRecords=[],this.customerSaleReportSubject=new Z.xQ,this.barcodeReportRecords=[],this.barcodeReportSubject=new Z.xQ}return o(t,[{key:"getCustomerSaleReportListener",value:function(){return this.customerSaleReportSubject.asObservable()}},{key:"getCustomerSaleReportRecords",value:function(){return e(this.customerSaleReportRecords)}},{key:"getBarcodeReportListener",value:function(){return this.barcodeReportSubject.asObservable()}},{key:"getBarcodeReportRecords",value:function(){return e(this.barcodeReportRecords)}},{key:"customerSaleReportByDate",value:function(t,r,a){var o=this;return this.http.post(this.BASE_API_URL+"/superStockist/customerSaleReports",{startDate:t,endDate:r,userID:a}).pipe((0,m.K)(this.handleError),(0,h.b)(function(t){t.data&&(o.customerSaleReportRecords=t.data,o.customerSaleReportSubject.next(e(o.customerSaleReportRecords)))}))}},{key:"barcodeReportByDate",value:function(t,r,a){var o=this;return this.http.post(this.BASE_API_URL+"/superStockist/barcodeReportByDate",{startDate:t,endDate:r,userID:a}).pipe((0,m.K)(this.handleError),(0,h.b)(function(t){t.data&&(o.barcodeReportRecords=t.data,o.barcodeReportSubject.next(e(o.barcodeReportRecords)))}))}},{key:"handleError",value:function(e){return e.error.message.includes("1062")?(0,f._)("Record already exists"):(0,f._)(e.error.message)}}]),t}()).\u0275fac=function(e){return new(e||i)(g.LFG(R.eN))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i),b=n(2088),T=n(1397),_=n(5939),q=n(8295),v=n(9983),y=n(3220),S=n(3679),U=n(1095),D=n(6640),k=n(7441),x=n(1494),M=n(2458),B=n(9925);function J(e,t){if(1&e&&(g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g._uU(10),g.qZA(),g.TgZ(11,"td"),g._uU(12),g.qZA(),g.qZA()),2&e){var r=t.$implicit;g.xp6(2),g.Oqu(r.terminal_pin),g.xp6(2),g.Oqu(r.stokiest_name),g.xp6(2),g.Oqu(r.total),g.xp6(2),g.Oqu(r.commission),g.xp6(2),g.Oqu(r.prize_value),g.xp6(2),g.Oqu(r.total-r.commission-r.prize_value)}}function w(e,t){1&e&&(g.TgZ(0,"div",34),g.TgZ(1,"h1"),g._uU(2,"No Data"),g.qZA(),g.qZA())}function O(e,t){if(1&e&&(g.TgZ(0,"div"),g.TgZ(1,"table",30),g.TgZ(2,"thead"),g.TgZ(3,"tr"),g.TgZ(4,"th",22),g._uU(5,"Terminal Id"),g.qZA(),g.TgZ(6,"th",22),g._uU(7,"Stokiest Name"),g.qZA(),g.TgZ(8,"th",31),g._uU(9,"Total"),g.qZA(),g.TgZ(10,"th",32),g._uU(11,"Commission"),g.qZA(),g.TgZ(12,"th",26),g._uU(13,"Prize"),g.qZA(),g.TgZ(14,"th",33),g._uU(15,"NTP"),g.qZA(),g._UZ(16,"th"),g.qZA(),g.qZA(),g.TgZ(17,"tbody"),g.YNc(18,J,13,6,"tr",27),g.TgZ(19,"tr"),g._UZ(20,"td"),g.TgZ(21,"td"),g._uU(22,"Grand Total"),g.qZA(),g.TgZ(23,"td"),g._uU(24),g.qZA(),g._UZ(25,"td"),g._UZ(26,"td"),g._UZ(27,"td"),g.qZA(),g.qZA(),g.qZA(),g.YNc(28,w,3,0,"div",28),g.qZA()),2&e){var r=g.oxw();g.xp6(18),g.Q6J("ngForOf",r.customerSaleReportRecords),g.xp6(6),g.Oqu(r.totalAmount),g.xp6(4),g.Q6J("ngIf",0==r.customerSaleReportRecords.length)}}function F(e,t){if(1&e&&(g.TgZ(0,"mat-option",35),g._uU(1),g.qZA()),2&e){var r=t.$implicit;g.Q6J("value",r.id),g.xp6(1),g.hij(" ",r.game_name," ")}}function I(e,t){if(1&e&&(g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g._uU(10),g.qZA(),g.TgZ(11,"td"),g._uU(12),g.qZA(),g.TgZ(13,"td"),g._uU(14),g.qZA(),g.TgZ(15,"td"),g._uU(16),g.qZA(),g.TgZ(17,"td"),g._uU(18),g.qZA(),g.TgZ(19,"td"),g.TgZ(20,"a",36),g._UZ(21,"i",37),g.qZA(),g.qZA(),g.qZA()),2&e){var r=t.$implicit;g.xp6(2),g.Oqu(r.barcode_number),g.xp6(2),g.Oqu(r.draw_time),g.xp6(2),g.Oqu(r.terminal_pin),g.xp6(2),g.Oqu("SINGLE DOUBLE TRIPLE"==r.game_name?"Triple chance":r.game_name),g.xp6(2),g.Oqu(r.ticket_taken_time),g.xp6(2),g.Oqu(r.total_quantity),g.xp6(2),g.Oqu(r.amount),g.xp6(2),g.Oqu(r.prize_value>0&&0==r.is_claimed?r.prize_value:"--"),g.xp6(2),g.Oqu(r.prize_value>0&&1==r.is_claimed?r.prize_value:"--")}}function N(e,t){1&e&&(g.TgZ(0,"div",34),g.TgZ(1,"h1"),g._uU(2,"No Data"),g.qZA(),g.qZA())}var C=[{path:"",canActivate:[u.c],component:function(){var e=function(){function e(t,a,o){r(this,e),this.superStockistReportService=t,this.masterTerminalService=a,this.gameService=o,this.thisYear=(new Date).getFullYear(),this.thisMonth=(new Date).getMonth(),this.thisDay=(new Date).getDate(),this.startDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.isProduction=d.N.production,this.showDevArea=!1,this.barcodeReportRecords=[],this.copyBarcodeReportRecords=[],this.customerSaleReportRecords=[],this.StartDateFilter=this.startDate,this.EndDateFilter=this.startDate,this.pipe=new s.uU("en-US"),this.totalAmount=0,this.columnNumber=4,this.selectedReport="0",this.terminals=[],this.userData=JSON.parse(localStorage.getItem("user"))}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.games=this.gameService.getGame(),this.gameService.getGameListener().subscribe(function(t){e.games=t,e.games.unshift({id:0,game_name:"All",auto_generate:"yes",active:"yes",multiplexer_random:"no",inforce:1,created_at:null,updated_at:null})}),this.games.unshift({id:0,game_name:"All",auto_generate:"yes",active:"yes",multiplexer_random:"no",inforce:1,created_at:null,updated_at:null}),this.terminals=this.masterTerminalService.getTerminals(),this.masterTerminalService.getTerminalListener().subscribe(function(t){e.terminals=t}),this.searchByDateTab1(),this.searchByDateTab2(),this.barcodeReportRecords=this.superStockistReportService.getBarcodeReportRecords(),this.copyBarcodeReportRecords=this.superStockistReportService.getBarcodeReportRecords(),this.superStockistReportService.getBarcodeReportListener().subscribe(function(t){e.barcodeReportRecords=t,e.copyBarcodeReportRecords=t}),this.customerSaleReportRecords=this.superStockistReportService.getCustomerSaleReportRecords(),this.superStockistReportService.getCustomerSaleReportListener().subscribe(function(t){e.customerSaleReportRecords=t;var r=0;e.customerSaleReportRecords.forEach(function(e){r+=Number(e.total)}),e.totalAmount=r})}},{key:"sortByGame",value:function(){var e=this;0!==this.gameId&&null!=this.terminalPin?(this.barcodeReportRecords=this.copyBarcodeReportRecords.filter(function(t){return t.game_id===e.gameId}),this.barcodeReportRecords=this.barcodeReportRecords.filter(function(t){return t.terminal_pin===e.terminalPin})):this.barcodeReportRecords=0!==this.gameId?this.copyBarcodeReportRecords.filter(function(t){return t.game_id===e.gameId}):this.terminalPin?this.copyBarcodeReportRecords.filter(function(t){return t.terminal_pin===e.terminalPin}):this.copyBarcodeReportRecords}},{key:"sortByTerminal",value:function(e){var t=this;0!==this.gameId&&null!=this.terminalPin?(this.barcodeReportRecords=this.copyBarcodeReportRecords.filter(function(e){return e.game_id===t.gameId}),this.barcodeReportRecords=this.barcodeReportRecords.filter(function(e){return e.terminal_pin===t.terminalPin})):this.barcodeReportRecords=null!=e?this.copyBarcodeReportRecords.filter(function(t){return t.terminal_pin===e}):0!==this.gameId?this.copyBarcodeReportRecords.filter(function(e){return e.game_id===t.gameId}):this.copyBarcodeReportRecords}},{key:"searchByDateTab1",value:function(){p().fire({title:"Please Wait !",html:"loading ...",allowOutsideClick:!1,didOpen:function(){p().showLoading()}});var e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),t=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.superStockistReportService.customerSaleReportByDate(e,t,this.userData.userId).subscribe(function(e){e.data&&p().close()})}},{key:"searchByDateTab2",value:function(){p().fire({title:"Please Wait !",html:"loading ...",allowOutsideClick:!1,didOpen:function(){p().showLoading()}});var e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),t=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.superStockistReportService.barcodeReportByDate(e,t,this.userData.userId).subscribe(function(e){e.data&&p().close()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(A),g.Y36(b.S),g.Y36(T.h))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-super-stockist-report"]],decls:78,vars:23,consts:[[1,"mt-2","mr-3","ml-3"],["label","Customer sales report"],[1,"pt-1","d-flex"],[1,"col"],["appearance","fill"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"ngModel","ngModelChange"],["picker",""],["picker1",""],["mat-button","","color","accent",2,"font-size","20px",3,"click"],[4,"ngIf"],["label","Barcode report"],[1,"text-center",2,"align-content","center","align-items","center","text-align","center"],[1,"row"],[1,"col-3"],["bindLabel","pin","bindValue","pin",3,"items","ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSort","",1,"ml-4","col-11","table","table-bordered","table-sm",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","barcode_number"],["mat-sort-header","draw_time"],["mat-sort-header","terminal_pin"],["mat-sort-header","ticket_taken_time"],["mat-sort-header","total_quantity"],["mat-sort-header","amount"],["mat-sort-header","prize_value"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["label","Draw wise report"],["matSort","",1,"table","table-bordered","table-sm",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","total"],["mat-sort-header","commission"],["mat-sort-header","ntp"],[1,"text-center"],[3,"value"],["color","info","mdbWavesEffect","",1,"waves-effect","mb-4"],[1,"bi","bi-info-square-fill"]],template:function(e,t){if(1&e&&(g.TgZ(0,"mat-tab-group",0),g.TgZ(1,"mat-tab",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"mat-form-field",4),g.TgZ(5,"mat-label"),g._uU(6,"Start date"),g.qZA(),g.TgZ(7,"input",5),g.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),g.qZA(),g._UZ(8,"mat-datepicker-toggle",6),g.TgZ(9,"mat-datepicker",7,8),g.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(11,"div",3),g.TgZ(12,"mat-form-field",4),g.TgZ(13,"mat-label"),g._uU(14,"End date"),g.qZA(),g.TgZ(15,"input",5),g.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),g.qZA(),g._UZ(16,"mat-datepicker-toggle",6),g.TgZ(17,"mat-datepicker",7,9),g.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(19,"button",10),g.NdJ("click",function(){return t.searchByDateTab1()}),g._uU(20,"Search"),g.qZA(),g.qZA(),g.YNc(21,O,29,3,"div",11),g.qZA(),g.TgZ(22,"mat-tab",12),g.TgZ(23,"div",2),g.TgZ(24,"div",3),g.TgZ(25,"mat-form-field",4),g.TgZ(26,"mat-label"),g._uU(27,"Start date"),g.qZA(),g.TgZ(28,"input",5),g.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),g.qZA(),g._UZ(29,"mat-datepicker-toggle",6),g.TgZ(30,"mat-datepicker",7,8),g.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(32,"div",3),g.TgZ(33,"mat-form-field",4),g.TgZ(34,"mat-label"),g._uU(35,"End date"),g.qZA(),g.TgZ(36,"input",5),g.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),g.qZA(),g._UZ(37,"mat-datepicker-toggle",6),g.TgZ(38,"mat-datepicker",7,9),g.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(40,"button",10),g.NdJ("click",function(){return t.searchByDateTab2()}),g._uU(41,"Search"),g.qZA(),g.qZA(),g.TgZ(42,"div",13),g.TgZ(43,"div",14),g.TgZ(44,"div",15),g.TgZ(45,"ng-select",16),g.NdJ("ngModelChange",function(e){return t.terminalPin=e})("change",function(){return t.sortByTerminal(t.terminalPin)}),g.qZA(),g.qZA(),g.TgZ(46,"div",15),g.TgZ(47,"mat-form-field",4),g.TgZ(48,"mat-label"),g._uU(49,"Games"),g.qZA(),g.TgZ(50,"mat-select",17),g.NdJ("ngModelChange",function(e){return t.gameId=e})("selectionChange",function(){return t.sortByGame()}),g.YNc(51,F,2,2,"mat-option",18),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(52,"table",19),g.TgZ(53,"thead"),g.TgZ(54,"tr"),g.TgZ(55,"th",20),g._uU(56,"Barcode"),g.qZA(),g.TgZ(57,"th",21),g._uU(58,"Draw time"),g.qZA(),g.TgZ(59,"th",22),g._uU(60,"Terminal"),g.qZA(),g.TgZ(61,"th",22),g._uU(62,"Game"),g.qZA(),g.TgZ(63,"th",23),g._uU(64,"Ticket take time"),g.qZA(),g.TgZ(65,"th",24),g._uU(66,"Quantity"),g.qZA(),g.TgZ(67,"th",25),g._uU(68,"Amount"),g.qZA(),g.TgZ(69,"th",26),g._uU(70,"UnClaimed Amount"),g.qZA(),g.TgZ(71,"th",26),g._uU(72,"Claimed Amount"),g.qZA(),g._UZ(73,"th"),g.qZA(),g.qZA(),g.TgZ(74,"tbody"),g.YNc(75,I,22,9,"tr",27),g.qZA(),g.qZA(),g.YNc(76,N,3,0,"div",28),g.qZA(),g.qZA(),g._UZ(77,"mat-tab",29),g.qZA()),2&e){var r=g.MAs(10),a=g.MAs(18);g.xp6(7),g.Q6J("matDatepicker",r)("ngModel",t.StartDateFilter),g.xp6(1),g.Q6J("for",r),g.xp6(1),g.Q6J("ngModel",t.StartDateFilter),g.xp6(6),g.Q6J("matDatepicker",a)("ngModel",t.EndDateFilter),g.xp6(1),g.Q6J("for",a),g.xp6(1),g.Q6J("ngModel",t.EndDateFilter),g.xp6(4),g.Q6J("ngIf","0"==t.selectedReport),g.xp6(7),g.Q6J("matDatepicker",r)("ngModel",t.StartDateFilter),g.xp6(1),g.Q6J("for",r),g.xp6(1),g.Q6J("ngModel",t.StartDateFilter),g.xp6(6),g.Q6J("matDatepicker",a)("ngModel",t.EndDateFilter),g.xp6(1),g.Q6J("for",a),g.xp6(1),g.Q6J("ngModel",t.EndDateFilter),g.xp6(7),g.Q6J("items",t.terminals)("ngModel",t.terminalPin),g.xp6(5),g.Q6J("ngModel",t.gameId),g.xp6(1),g.Q6J("ngForOf",t.games),g.xp6(24),g.Q6J("ngForOf",t.barcodeReportRecords),g.xp6(1),g.Q6J("ngIf",0==t.barcodeReportRecords.length)}},directives:[_.SP,_.uX,q.KE,q.hX,v.Nt,y.hl,S.Fj,S.JJ,S.On,y.nW,q.R9,y.Mq,U.lW,s.O5,D.w9,k.gD,s.sg,x.YE,x.nU,M.ey,B.b6],styles:[""]}),e}()}],E=function(){var e=o(function e(){r(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[c.Bz.forChild(C)],c.Bz]}),e}(),Q=n(5480),P=n(5566),L=n(3738),j=n(5396),z=n(9870),Y=n(4820),G=n(346),W=n(2542),X=function(){var e=o(function e(){r(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[s.ez,E,_.Nh,Q.q,P.o9,k.LD,L.QW,S.u5,S.UX,j.rP,x.JX,z.aE,z.bz,B.At,Y.UU,G.g,y.FA,v.c,S.u5,M.XK,M.si,U.ot,W.vV,q.lN,D.A0]]}),e}()}}])}();