"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[766],{2766:function(e,t,r){r.r(t),r.d(t,{SuperStockistReportModule:function(){return Y}});var a=r(8583),o=r(3423),i=r(2396),s=r(2340),n=r(8259),c=r.n(n),d=r(7716),l=r(5304),u=r(8307),p=r(9765),g=r(205),h=r(1841);let m=(()=>{class e{constructor(e){this.http=e,this.BASE_API_URL=s.N.BASE_API_URL,this.customerSaleReportRecords=[],this.customerSaleReportSubject=new p.xQ,this.barcodeReportRecords=[],this.barcodeReportSubject=new p.xQ}getCustomerSaleReportListener(){return this.customerSaleReportSubject.asObservable()}getCustomerSaleReportRecords(){return[...this.customerSaleReportRecords]}getBarcodeReportListener(){return this.barcodeReportSubject.asObservable()}getBarcodeReportRecords(){return[...this.barcodeReportRecords]}customerSaleReportByDate(e,t,r){return this.http.post(this.BASE_API_URL+"/superStockist/customerSaleReports",{startDate:e,endDate:t,userID:r}).pipe((0,l.K)(this.handleError),(0,u.b)(e=>{e.data&&(this.customerSaleReportRecords=e.data,this.customerSaleReportSubject.next([...this.customerSaleReportRecords]))}))}barcodeReportByDate(e,t,r){return this.http.post(this.BASE_API_URL+"/superStockist/barcodeReportByDate",{startDate:e,endDate:t,userID:r}).pipe((0,l.K)(this.handleError),(0,u.b)(e=>{e.data&&(this.barcodeReportRecords=e.data,this.barcodeReportSubject.next([...this.barcodeReportRecords]))}))}handleError(e){return e.error.message.includes("1062")?(0,g._)("Record already exists"):(0,g._)(e.error.message)}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(h.eN))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Z=r(2088),R=r(1397),A=r(5939),_=r(8295),q=r(9983),T=r(3220),f=r(3679),b=r(1095),S=r(6640),U=r(7441),D=r(1494),y=r(2458),v=r(9925);function x(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.TgZ(11,"td"),d._uU(12),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.terminal_pin),d.xp6(2),d.Oqu(e.stokiest_name),d.xp6(2),d.Oqu(e.total),d.xp6(2),d.Oqu(e.commission),d.xp6(2),d.Oqu(e.prize_value),d.xp6(2),d.Oqu(e.total-e.commission-e.prize_value)}}function k(e,t){1&e&&(d.TgZ(0,"div",34),d.TgZ(1,"h1"),d._uU(2,"No Data"),d.qZA(),d.qZA())}function M(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"table",30),d.TgZ(2,"thead"),d.TgZ(3,"tr"),d.TgZ(4,"th",22),d._uU(5,"Terminal Id"),d.qZA(),d.TgZ(6,"th",22),d._uU(7,"Stokiest Name"),d.qZA(),d.TgZ(8,"th",31),d._uU(9,"Total"),d.qZA(),d.TgZ(10,"th",32),d._uU(11,"Commission"),d.qZA(),d.TgZ(12,"th",26),d._uU(13,"Prize"),d.qZA(),d.TgZ(14,"th",33),d._uU(15,"NTP"),d.qZA(),d._UZ(16,"th"),d.qZA(),d.qZA(),d.TgZ(17,"tbody"),d.YNc(18,x,13,6,"tr",27),d.TgZ(19,"tr"),d._UZ(20,"td"),d.TgZ(21,"td"),d._uU(22,"Grand Total"),d.qZA(),d.TgZ(23,"td"),d._uU(24),d.qZA(),d._UZ(25,"td"),d._UZ(26,"td"),d._UZ(27,"td"),d.qZA(),d.qZA(),d.qZA(),d.YNc(28,k,3,0,"div",28),d.qZA()),2&e){const e=d.oxw();d.xp6(18),d.Q6J("ngForOf",e.customerSaleReportRecords),d.xp6(6),d.Oqu(e.totalAmount),d.xp6(4),d.Q6J("ngIf",0==e.customerSaleReportRecords.length)}}function B(e,t){if(1&e&&(d.TgZ(0,"mat-option",35),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.id),d.xp6(1),d.hij(" ",e.game_name," ")}}function J(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.TgZ(11,"td"),d._uU(12),d.qZA(),d.TgZ(13,"td"),d._uU(14),d.qZA(),d.TgZ(15,"td"),d._uU(16),d.qZA(),d.TgZ(17,"td"),d._uU(18),d.qZA(),d.TgZ(19,"td"),d.TgZ(20,"a",36),d._UZ(21,"i",37),d.qZA(),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.barcode_number),d.xp6(2),d.Oqu(e.draw_time),d.xp6(2),d.Oqu(e.terminal_pin),d.xp6(2),d.Oqu("SINGLE DOUBLE TRIPLE"==e.game_name?"Triple chance":e.game_name),d.xp6(2),d.Oqu(e.ticket_taken_time),d.xp6(2),d.Oqu(e.total_quantity),d.xp6(2),d.Oqu(e.amount),d.xp6(2),d.Oqu(e.prize_value>0&&0==e.is_claimed?e.prize_value:"--"),d.xp6(2),d.Oqu(e.prize_value>0&&1==e.is_claimed?e.prize_value:"--")}}function F(e,t){1&e&&(d.TgZ(0,"div",34),d.TgZ(1,"h1"),d._uU(2,"No Data"),d.qZA(),d.qZA())}const N=[{path:"",canActivate:[i.c],component:(()=>{class e{constructor(e,t,r){this.superStockistReportService=e,this.masterTerminalService=t,this.gameService=r,this.thisYear=(new Date).getFullYear(),this.thisMonth=(new Date).getMonth(),this.thisDay=(new Date).getDate(),this.startDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.isProduction=s.N.production,this.showDevArea=!1,this.barcodeReportRecords=[],this.copyBarcodeReportRecords=[],this.customerSaleReportRecords=[],this.StartDateFilter=this.startDate,this.EndDateFilter=this.startDate,this.pipe=new a.uU("en-US"),this.totalAmount=0,this.columnNumber=4,this.selectedReport="0",this.terminals=[],this.userData=JSON.parse(localStorage.getItem("user"))}ngOnInit(){this.games=this.gameService.getGame(),this.gameService.getGameListener().subscribe(e=>{this.games=e,this.games.unshift({id:0,game_name:"All",auto_generate:"yes",active:"yes",multiplexer_random:"no",inforce:1,created_at:null,updated_at:null})}),this.games.unshift({id:0,game_name:"All",auto_generate:"yes",active:"yes",multiplexer_random:"no",inforce:1,created_at:null,updated_at:null}),this.terminals=this.masterTerminalService.getTerminals(),this.masterTerminalService.getTerminalListener().subscribe(e=>{this.terminals=e}),this.searchByDateTab1(),this.searchByDateTab2(),this.barcodeReportRecords=this.superStockistReportService.getBarcodeReportRecords(),this.copyBarcodeReportRecords=this.superStockistReportService.getBarcodeReportRecords(),this.superStockistReportService.getBarcodeReportListener().subscribe(e=>{this.barcodeReportRecords=e,this.copyBarcodeReportRecords=e}),this.customerSaleReportRecords=this.superStockistReportService.getCustomerSaleReportRecords(),this.superStockistReportService.getCustomerSaleReportListener().subscribe(e=>{this.customerSaleReportRecords=e;let t=0;this.customerSaleReportRecords.forEach(function(e){t+=Number(e.total)}),this.totalAmount=t})}sortByGame(){0!==this.gameId&&null!=this.terminalPin?(this.barcodeReportRecords=this.copyBarcodeReportRecords.filter(e=>e.game_id===this.gameId),this.barcodeReportRecords=this.barcodeReportRecords.filter(e=>e.terminal_pin===this.terminalPin)):this.barcodeReportRecords=0!==this.gameId?this.copyBarcodeReportRecords.filter(e=>e.game_id===this.gameId):this.terminalPin?this.copyBarcodeReportRecords.filter(e=>e.terminal_pin===this.terminalPin):this.copyBarcodeReportRecords}sortByTerminal(e){0!==this.gameId&&null!=this.terminalPin?(this.barcodeReportRecords=this.copyBarcodeReportRecords.filter(e=>e.game_id===this.gameId),this.barcodeReportRecords=this.barcodeReportRecords.filter(e=>e.terminal_pin===this.terminalPin)):this.barcodeReportRecords=null!=e?this.copyBarcodeReportRecords.filter(t=>t.terminal_pin===e):0!==this.gameId?this.copyBarcodeReportRecords.filter(e=>e.game_id===this.gameId):this.copyBarcodeReportRecords}searchByDateTab1(){c().fire({title:"Please Wait !",html:"loading ...",allowOutsideClick:!1,didOpen:()=>{c().showLoading()}});const e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),t=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.superStockistReportService.customerSaleReportByDate(e,t,this.userData.userId).subscribe(e=>{e.data&&c().close()})}searchByDateTab2(){c().fire({title:"Please Wait !",html:"loading ...",allowOutsideClick:!1,didOpen:()=>{c().showLoading()}});const e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),t=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.superStockistReportService.barcodeReportByDate(e,t,this.userData.userId).subscribe(e=>{e.data&&c().close()})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(m),d.Y36(Z.S),d.Y36(R.h))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-super-stockist-report"]],decls:78,vars:23,consts:[[1,"mt-2","mr-3","ml-3"],["label","Customer sales report"],[1,"pt-1","d-flex"],[1,"col"],["appearance","fill"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"ngModel","ngModelChange"],["picker",""],["picker1",""],["mat-button","","color","accent",2,"font-size","20px",3,"click"],[4,"ngIf"],["label","Barcode report"],[1,"text-center",2,"align-content","center","align-items","center","text-align","center"],[1,"row"],[1,"col-3"],["bindLabel","pin","bindValue","pin",3,"items","ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSort","",1,"ml-4","col-11","table","table-bordered","table-sm",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","barcode_number"],["mat-sort-header","draw_time"],["mat-sort-header","terminal_pin"],["mat-sort-header","ticket_taken_time"],["mat-sort-header","total_quantity"],["mat-sort-header","amount"],["mat-sort-header","prize_value"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["label","Draw wise report"],["matSort","",1,"table","table-bordered","table-sm",2,"border","none !important","height","50px","overflow","scroll"],["mat-sort-header","total"],["mat-sort-header","commission"],["mat-sort-header","ntp"],[1,"text-center"],[3,"value"],["color","info","mdbWavesEffect","",1,"waves-effect","mb-4"],[1,"bi","bi-info-square-fill"]],template:function(e,t){if(1&e&&(d.TgZ(0,"mat-tab-group",0),d.TgZ(1,"mat-tab",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"mat-form-field",4),d.TgZ(5,"mat-label"),d._uU(6,"Start date"),d.qZA(),d.TgZ(7,"input",5),d.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),d.qZA(),d._UZ(8,"mat-datepicker-toggle",6),d.TgZ(9,"mat-datepicker",7,8),d.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",3),d.TgZ(12,"mat-form-field",4),d.TgZ(13,"mat-label"),d._uU(14,"End date"),d.qZA(),d.TgZ(15,"input",5),d.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),d.qZA(),d._UZ(16,"mat-datepicker-toggle",6),d.TgZ(17,"mat-datepicker",7,9),d.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"button",10),d.NdJ("click",function(){return t.searchByDateTab1()}),d._uU(20,"Search"),d.qZA(),d.qZA(),d.YNc(21,M,29,3,"div",11),d.qZA(),d.TgZ(22,"mat-tab",12),d.TgZ(23,"div",2),d.TgZ(24,"div",3),d.TgZ(25,"mat-form-field",4),d.TgZ(26,"mat-label"),d._uU(27,"Start date"),d.qZA(),d.TgZ(28,"input",5),d.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),d.qZA(),d._UZ(29,"mat-datepicker-toggle",6),d.TgZ(30,"mat-datepicker",7,8),d.NdJ("ngModelChange",function(e){return t.StartDateFilter=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(32,"div",3),d.TgZ(33,"mat-form-field",4),d.TgZ(34,"mat-label"),d._uU(35,"End date"),d.qZA(),d.TgZ(36,"input",5),d.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),d.qZA(),d._UZ(37,"mat-datepicker-toggle",6),d.TgZ(38,"mat-datepicker",7,9),d.NdJ("ngModelChange",function(e){return t.EndDateFilter=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(40,"button",10),d.NdJ("click",function(){return t.searchByDateTab2()}),d._uU(41,"Search"),d.qZA(),d.qZA(),d.TgZ(42,"div",13),d.TgZ(43,"div",14),d.TgZ(44,"div",15),d.TgZ(45,"ng-select",16),d.NdJ("ngModelChange",function(e){return t.terminalPin=e})("change",function(){return t.sortByTerminal(t.terminalPin)}),d.qZA(),d.qZA(),d.TgZ(46,"div",15),d.TgZ(47,"mat-form-field",4),d.TgZ(48,"mat-label"),d._uU(49,"Games"),d.qZA(),d.TgZ(50,"mat-select",17),d.NdJ("ngModelChange",function(e){return t.gameId=e})("selectionChange",function(){return t.sortByGame()}),d.YNc(51,B,2,2,"mat-option",18),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(52,"table",19),d.TgZ(53,"thead"),d.TgZ(54,"tr"),d.TgZ(55,"th",20),d._uU(56,"Barcode"),d.qZA(),d.TgZ(57,"th",21),d._uU(58,"Draw time"),d.qZA(),d.TgZ(59,"th",22),d._uU(60,"Terminal"),d.qZA(),d.TgZ(61,"th",22),d._uU(62,"Game"),d.qZA(),d.TgZ(63,"th",23),d._uU(64,"Ticket take time"),d.qZA(),d.TgZ(65,"th",24),d._uU(66,"Quantity"),d.qZA(),d.TgZ(67,"th",25),d._uU(68,"Amount"),d.qZA(),d.TgZ(69,"th",26),d._uU(70,"UnClaimed Amount"),d.qZA(),d.TgZ(71,"th",26),d._uU(72,"Claimed Amount"),d.qZA(),d._UZ(73,"th"),d.qZA(),d.qZA(),d.TgZ(74,"tbody"),d.YNc(75,J,22,9,"tr",27),d.qZA(),d.qZA(),d.YNc(76,F,3,0,"div",28),d.qZA(),d.qZA(),d._UZ(77,"mat-tab",29),d.qZA()),2&e){const e=d.MAs(10),r=d.MAs(18);d.xp6(7),d.Q6J("matDatepicker",e)("ngModel",t.StartDateFilter),d.xp6(1),d.Q6J("for",e),d.xp6(1),d.Q6J("ngModel",t.StartDateFilter),d.xp6(6),d.Q6J("matDatepicker",r)("ngModel",t.EndDateFilter),d.xp6(1),d.Q6J("for",r),d.xp6(1),d.Q6J("ngModel",t.EndDateFilter),d.xp6(4),d.Q6J("ngIf","0"==t.selectedReport),d.xp6(7),d.Q6J("matDatepicker",e)("ngModel",t.StartDateFilter),d.xp6(1),d.Q6J("for",e),d.xp6(1),d.Q6J("ngModel",t.StartDateFilter),d.xp6(6),d.Q6J("matDatepicker",r)("ngModel",t.EndDateFilter),d.xp6(1),d.Q6J("for",r),d.xp6(1),d.Q6J("ngModel",t.EndDateFilter),d.xp6(7),d.Q6J("items",t.terminals)("ngModel",t.terminalPin),d.xp6(5),d.Q6J("ngModel",t.gameId),d.xp6(1),d.Q6J("ngForOf",t.games),d.xp6(24),d.Q6J("ngForOf",t.barcodeReportRecords),d.xp6(1),d.Q6J("ngIf",0==t.barcodeReportRecords.length)}},directives:[A.SP,A.uX,_.KE,_.hX,q.Nt,T.hl,f.Fj,f.JJ,f.On,T.nW,_.R9,T.Mq,b.lW,a.O5,S.w9,U.gD,a.sg,D.YE,D.nU,y.ey,v.b6],styles:[""]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.Bz.forChild(N)],o.Bz]}),e})();var I=r(5480),w=r(5566),C=r(3738),E=r(5396),Q=r(9870),P=r(4820),L=r(346),z=r(2542);let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.ez,O,A.Nh,I.q,w.o9,U.LD,C.QW,f.u5,f.UX,E.rP,D.JX,Q.aE,Q.bz,v.At,P.UU,L.g,T.FA,q.c,f.u5,y.XK,y.si,b.ot,z.vV,_.lN,S.A0]]}),e})()}}]);